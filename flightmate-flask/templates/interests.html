{% extends "base.html" %}
{% block content %}
<div class="card stack">
  <h2>Choose an Interest</h2>

  {% if my_values and my_values|length > 0 %}
    <form method="post" class="row">
      <select class="select" name="interest">
        {% for val in my_values %}
          <option value="{{ val }}" {% if selected and val == selected[0] %}selected{% endif %}>
            {{ val }}
          </option>
        {% endfor %}
      </select>
      <button class="btn primary">See Matches</button>
    </form>
    {% if selected %}
      <div class="badge">Matching on: {{ selected[0] }}</div>
    {% endif %}
  {% else %}
    <div class="badge">No interests yet ‚Äî set your profile first.</div>
    <a class="btn" href="{{ url_for('onboarding') }}">Create / Edit Profile</a>
  {% endif %}
</div>

{% if picks %}
<div class="card stack">
  <h2>Matches</h2>
  {% for p in picks %}
    <div class="person">
      <div>
        <div><strong>{{ p.name }}</strong></div>

        {# Show detailed interests line: "Sports: Football ‚Ä¢ Tech: Computers ..." #}
        {% set lines = [] %}
        {% if p.sports %}{% set _ = lines.append('Sports: ' ~ p.sports) %}{% endif %}
        {% if p.tech %}{% set _ = lines.append('Tech: ' ~ p.tech) %}{% endif %}
        {% if p.art %}{% set _ = lines.append('Art: ' ~ p.art) %}{% endif %}
        {% if p.food %}{% set _ = lines.append('Food: ' ~ p.food) %}{% endif %}
        {% if p.shopping %}{% set _ = lines.append('Shopping: ' ~ p.shopping) %}{% endif %}
        <div class="meta">{{ lines|join(' ‚Ä¢ ') }}</div>
      </div>

      <div class="actions">
        <button class="icon like" data-like="{{ p.id }}">‚ù§Ô∏è</button>
        <button class="icon msg" data-chat>üí¨</button>
        <a class="btn" href="{{ url_for('person', pid=p.id, back='interests') }}">Details</a>
        <a class="btn ok" href="{{ url_for('connect', pid=p.id) }}">Connect</a>
      </div>
    </div>
  {% endfor %}
</div>
{% elif selected and my_values and selected[0] in my_values %}
<div class="card">
  <div class="empty">No one matches <strong>{{ selected[0] }}</strong> yet. Try another one of your interests.</div>
</div>
{% endif %}
{% endblock %}
